- #isaaclab #isaacsim #reinforcement_learning
- ## 环境
	- ```
	  Isaac-my_Lift-Cube-Franka-v0
	  Isaac-Lift-Cube-Franka-v0
	  ```
	- ```
	  Isaac-Stack-Cube-Franka-IK-Rel-v0
	  ```
	-
- ## 想法
	- 直接通过强化学习直接学会可能吗
- ## 实现日志
	- ppo无法让模型学会lift
	- sac测试出了问题，机械臂消失了，疑似随机动作的问题？ppo正常
	- 妈呀，难道之前是数据量不够的原因吗，数据量上去了就训出来了
	- 当memorysize与rollout不相同，就会出现问题：机械臂位置出现问题
	- ### 20250522
		- 下一步计划实现开放语义抓取，即有不同颜色的cube,输入物体描述的embedding
		- 卡在了测试siglip2
	- ### 20250523
		- obs中需要包含任务文本和image的embedding
		- 如何实现多样物体的随机化？
		- 如何判定指令对应任务是否完成
	- ### 20250524
		- 如何将深度融入语义
		- 首先测试如何将siglip融入到工作流
		- manager_based obs self.concatenate_terms = Trues时的结果
			- {'policy': tensor([[-0.0495, -0.4073,  0.0774, -0.1531, -0.0029, -0.2197, -0.0316, -0.0232,
			           -0.0231, -1.5982,  2.1754,  2.1734,  1.7801, -2.5614, -2.6100,  2.6058,
			            0.1998,  0.2029,  0.5499, -0.2137,  0.0210,  0.5557, -0.1120,  0.3648,
			            1.0000,  0.0000,  0.0000,  0.0000, -0.0411, -0.0561,  0.8061,  0.3162,
			           -0.9827, -0.6996,  0.3813,  0.1613]], device='cuda:0')}
		- direct env obs结果
		  collapsed:: true
			- ```
			  {'policy': {'actions': tensor([[-0.5154, -0.0924,  0.5866,  0.3119,  0.5419,  0.2258,  0.4917, -0.7876,
			           -0.0724]], device='cuda:0'), 'rgb': tensor([[[[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.4936, -2.4936, -2.4936]],
			  
			           [[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.4952, -2.4952, -2.4952]],
			  
			           [[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.4982, -2.4982, -2.4982]],
			  
			           ...,
			  
			           [[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.4968, -2.4968, -2.4968],
			            [-2.4970, -2.4970, -2.4970],
			            [-2.4894, -2.4894, -2.4894]],
			  
			           [[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.4975, -2.4975, -2.4975],
			            [-2.4998, -2.4998, -2.4998],
			            [-2.4962, -2.4962, -2.4962]],
			  
			           [[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000]]]], device='cuda:0'), 'rgb2': tensor([[[[ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            ...,
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1209,  2.1209,  2.1209]],
			  
			           [[ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            ...,
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1390,  2.1390,  2.1390]],
			  
			           [[ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            ...,
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1667,  2.1667,  2.1667],
			            [ 2.1453,  2.1453,  2.1453]],
			  
			           ...,
			  
			           [[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000]],
			  
			           [[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000]],
			  
			           [[-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            ...,
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000],
			            [-2.5000, -2.5000, -2.5000]]]], device='cuda:0'), 'to_target': tensor([[ 0.6302,  0.0949, -0.2875]], device='cuda:0')}}
			  ```
		- manager based concatenate =False时候的obs结果
			- ```
			  {'policy': {'joint_pos': tensor([[ 0.0083,  0.0480,  0.0478, -0.0895, -0.0503, -0.0661, -0.1612,  0.0000,
			            0.0000]], device='cuda:0'), 'joint_vel': tensor([[-0.0299, -0.2751, -2.1749, -0.8127,  1.3739, -1.2388,  0.3891,  0.0066,
			            0.0025]], device='cuda:0'), 'object_position': tensor([[ 0.4847, -0.2363,  0.0210]], device='cuda:0'), 'target_object_position': tensor([[0.5022, 0.1148, 0.3830, 1.0000, 0.0000, 0.0000, 0.0000]],
			         device='cuda:0'), 'actions': tensor([[-0.4882, -0.3291, -0.8014,  0.3183,  0.9181, -0.1656, -0.2962,  0.4618]],
			         device='cuda:0')}}
			  ```
	- ### 20250525
		- obs采用dict方案，缺点，似乎不会兼容原来的训练方案，优点，结构更加清晰
			- 需要在env cfg中先设置好：
			  ```
			      observation_space = {
			          'rgb':[64,64,3],
			          'rgb2':[64,64,3],
			          'actions':9,
			          'to_target':3
			      }
			  ```
		- 剩下的问题是如何将siglip的工作流嵌入到环境中