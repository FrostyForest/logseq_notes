- #图形学 #光栅化 #光线追踪
- ##
- ## 光栅化和光线追踪的比较
	- 您提到了一个至关重要的点！没错，在没有实时光线追踪的几十年里，我们已经能渲染出非常精美、甚至照片级的图像和游戏画面了。
	  
	  这是因为，在光线追踪普及之前，业界一直使用一种非常聪明且高效的“捷径”方法来渲染图像，这个方法叫做**光栅化 (Rasterization)**。
	  
	  **光栅化和光线追踪，可以看作是实现“渲染”这个最终目标的两种不同哲学。**
	  
	  让我们用一个生动的比喻来区分它们：
	  
	  ---
	- ### 画家 vs 摄影师
		- *   **光栅化 (Rasterization) 就像一个技艺高超的“画家”。**
		  *   **光线追踪 (Ray Tracing) 就像一个忠实记录的“摄影师”。**
		  
		  ---
	- ### 光栅化 (Rasterization) - “画”出现实感
		- 这是过去几十年来游戏和实时渲染的绝对主力。它的工作流程是“**从物体出发**”。
		  
		  1.  **投射轮廓**：首先，它会把三维空间中的所有物体（由三角形构成）一个个地“投射”到你的二维屏幕上，确定每个三角形在屏幕上覆盖了哪些像素。这就像画家先画出物体的轮廓。
		  
		  2.  **“画”上光影**：确定了轮廓后，问题来了：这些像素应该是什么颜色？光栅化用各种**“技巧”或“骗术”(Tricks/Hacks)** 来模拟真实世界的光影效果。
		    *   **阴影怎么画？** 它不会去计算光线是否被挡住。而是用一种叫**“阴影贴图 (Shadow Mapping)”**的技术。大致就是：先从光源的角度“拍一张照片”，看看哪些地方离光源近，哪些远（这张照片就是阴影贴图）。然后再回到你的视角，去检查屏幕上的每个点，看它在不在光源那张“照片”的阴影里。这是一种非常聪明的近似，但经常会出现边缘锯齿、阴影不精确等问题。
		    *   **反射怎么画？** 它不会真的去追踪反射光线。而是用**“屏幕空间反射 (Screen Space Reflection, SSR)”**，它只能反射出屏幕上已经画出来的东西。或者用**“反射探头 (Reflection Probe)”**，也就是预先在一个位置拍好一张360度全景图，然后把这张图“贴”在反光物体上。所以你经常会发现，游戏里的镜子要么不反射玩家自己，要么反射的景象有点“假”。
		    *   **全局光照怎么画？** 真实世界里，光会从一个物体反弹到另一个物体上（比如红墙会把白色的天花板映成淡红色）。光栅化很难模拟这个。通常是靠美术师**预先“烘焙”(Bake)** 光照信息到贴图上，或者用**“环境光遮蔽 (Ambient Occlusion)”**这种技术来给角落和缝隙加上一些假的接触阴影，增加立体感。
		  
		  **优点**：**速度极快！** 因为它避免了复杂的物理模拟，计算量相对小得多，非常适合需要每秒渲染60帧甚至更高帧率的游戏。
		  **缺点**：**真实感是“伪造”的**。所有高级光影效果都是近似和模拟，需要大量美术技巧和复杂的算法“作弊”才能看起来逼真。
		  
		  ---
	- ### 光线追踪 (Ray Tracing) - “拍”出现实感
		- 光线追踪则完全相反，它的工作流程是“**从眼睛出发**”，忠实地模拟物理规律。
		  
		  1.  **追踪光路**：它从屏幕上的每一个像素点，向场景中发射一条虚拟的“视线”。
		  2.  **模拟物理**：当这条视线击中一个物体时，它会开始真正的物理模拟：
		    *   **阴影怎么来？** 它会从击中点再发射一条光线到光源。如果中间被其他物体挡住了，那么这个点就是阴ako影。**简单、精确、完美。**
		    *   **反射怎么来？** 如果物体表面是镜面，它就会根据反射定律计算出反射方向，然后发射一条新的反射光线，继续追踪下去，看它会击中什么。**这能产生真正动态、精确的反射。**
		    *   **全局光照怎么来？** 如果物体表面是漫反射，它会向四周发射多条光线，看周围的环境是什么颜色，从而计算出这个点应该被染上什么环境色。**这就是真实的间接光照。**
		  
		  **优点**：**物理上正确，效果极其逼真。** 阴影、反射、折射、焦散等复杂光学现象都能被自然地模拟出来，无需“作弊”。
		  **缺点**：**计算量巨大！** 为屏幕上的每个像素点都进行多次光线追踪和反弹计算，需要惊人的算力。这就是为什么直到NVIDIA RTX系列和AMD RDNA2架构的显卡出现，通过内置专用硬件（RT Core等）来加速这个过程，实时光线追踪才在游戏中成为可能。
	- ### 总结
		- 所以，您完全正确。**在光追出现之前，我们依靠的是“光栅化”这个才华横溢的“画家”**，它用各种高效的技巧为我们画出了以假乱真的世界。
		  
		  而**“光线追踪”则是一位严谨的“摄影师”**，它虽然成本高昂（计算量大），但能为我们捕捉到物理上分毫不差的真实光影。现代游戏往往是**“混合渲染”**，即**以光栅化为主体，再用光线追踪来处理它最不擅长的阴影和反射部分**，实现性能和画质的最佳平衡。